{
  "versions": [
    {
      "version": "3.6.2",
      "version_code": 102,
      "release_date": "2025-02-08",
      "download_url": "https://adb.leetpc.com/api/v1/agent/updates/latest.apk",
      "size_bytes": 16507743,
      "sha256": "1d48628ba01566fb1f506d1e17bbe6ec4e2c851fb5fc497679929ce04ef33840",
      "changes": [
        "FIX: OkHttpClient shutdown on destroy — prevents thread pool/connection pool leak",
        "FIX: Circuit-breaking after 500 reconnect attempts — 60s pause then reset",
        "FIX: disconnect() cancels ALL child jobs (heartbeat, watchdog, reconnect) — fixes zombie coroutines",
        "FIX: bufferMessage() @Synchronized — fixes TOCTOU race on offlineBuffer",
        "FIX: statusBatchBuffer capped at 200 entries — prevents OOM during long disconnects",
        "FIX: onDestroy() calls connectionManager.shutdown() instead of disconnect()"
      ],
      "required": true
    },
    {
      "version": "3.6.1",
      "version_code": 101,
      "release_date": "2025-02-07",
      "download_url": "https://adb.leetpc.com/api/v1/agent/updates/latest.apk",
      "size_bytes": 0,
      "sha256": "",
      "changes": [
        "CRITICAL: Устранение ANR на 14+ LDPlayer эмуляторах",
        "FIX: BootReceiver — AtomicBoolean guard, 0 Thread.sleep, 0 su процессов",
        "FIX: RootAutoStart/RootInitInstaller — батч su (1 процесс вместо 30+)",
        "FIX: SphereAgentApp — ROOT ops отложены на 60с, одноразовый флаг",
        "FIX: AgentService — удалены restart alarm (START_STICKY + WorkManager)",
        "FIX: CommandExecutor — все process streams закрываются через use{}",
        "FIX: H264RootStreamService — NAL буфер с лимитом 2MB (защита от OOM)",
        "FIX: ConnectionManager — AtomicInteger для pendingFrames, атомарный drain offlineBuffer",
        "FIX: ServerDiscovery — Semaphore(24) вместо 254 параллельных async",
        "FIX: ScreenCaptureService — удалён дубликат UpdateManager",
        "FIX: ScriptLogSender — ConcurrentHashMap вместо mutableMapOf",
        "FIX: BootContentProvider — coroutine delay вместо Thread.sleep",
        "PERF: init.rc — 1 триггер вместо 4"
      ],
      "required": true
    },
    {
      "version": "3.5.9",
      "version_code": 99,
      "release_date": "2025-02-04",
      "download_url": "https://adb.leetpc.com/api/v1/agent/updates/latest.apk",
      "size_bytes": 16507743,
      "sha256": "",
      "changes": [
        "FIX: JSON serialization for script_log_batch",
        "Script logs now correctly sent to backend",
        "Improved logging and debugging"
      ],
      "required": true
    },
    {
      "version": "3.5.8",
      "version_code": 98,
      "release_date": "2025-02-04",
      "download_url": "https://adb.leetpc.com/api/v1/agent/updates/latest.apk",
      "size_bytes": 16507583,
      "sha256": "",
      "changes": [
        "CRITICAL: IP fallback on DNS resolution failure",
        "Auto-switch to next server when DNS/connection error",
        "Hardcoded production IP in APK (212.220.204.72)",
        "Improved fault tolerance for emulator fleets"
      ],
      "required": false
    },
    {
      "version": "3.5.7",
      "version_code": 97,
      "release_date": "2025-01-23",
      "download_url": "https://adb.leetpc.com/api/v1/agent/updates/latest.apk",
      "size_bytes": 0,
      "sha256": "",
      "changes": [
        "Multi-CDN config sources",
        "Emergency command execution",
        "HTTP polling fallback"
      ],
      "required": false
    }
  ],
  "latest": {
    "version": "3.6.2",
    "version_code": 102,
    "download_url": "https://adb.leetpc.com/api/v1/agent/updates/latest.apk"
  }
}
